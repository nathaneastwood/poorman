<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='These functions return information about the "current" group or "current" variable, so only work inside specific
contexts like summarise() and mutate().

n() gives the number of observations in the current group.



cur_data() gives the current data for the current group (excluding grouping variables).



cur_data_all() gives the current data for the current group (including grouping variables).



cur_group() gives the group keys, a single row data.frame containing a column for each grouping variable and
its value.



cur_group_id() gives a unique numeric identifier for the current group.



cur_group_rows() gives the rows the groups appear in the data.



cur_column() gives the name of the current column (in across() only).

'><title>Context dependent expressions — context • poorman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.2/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Context dependent expressions — context"><meta property="og:description" content='These functions return information about the "current" group or "current" variable, so only work inside specific
contexts like summarise() and mutate().

n() gives the number of observations in the current group.



cur_data() gives the current data for the current group (excluding grouping variables).



cur_data_all() gives the current data for the current group (including grouping variables).



cur_group() gives the group keys, a single row data.frame containing a column for each grouping variable and
its value.



cur_group_id() gives a unique numeric identifier for the current group.



cur_group_rows() gives the rows the groups appear in the data.



cur_column() gives the name of the current column (in across() only).

'><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">poorman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nathaneastwood/poorman/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Context dependent expressions</h1>
      <small class="dont-index">Source: <a href="https://github.com/nathaneastwood/poorman/blob/HEAD/R/context.R" class="external-link"><code>R/context.R</code></a></small>
      <div class="d-none name"><code>context.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions return information about the "current" group or "current" variable, so only work inside specific
contexts like <code><a href="summarise.html">summarise()</a></code> and <code><a href="mutate.html">mutate()</a></code>.</p>
<ul><li><p><code>n()</code> gives the number of observations in the current group.</p></li>
</ul><ul><li><p><code>cur_data()</code> gives the current data for the current group (excluding grouping variables).</p></li>
</ul><ul><li><p><code>cur_data_all()</code> gives the current data for the current group (including grouping variables).</p></li>
</ul><ul><li><p><code>cur_group()</code> gives the group keys, a single row <code>data.frame</code> containing a column for each grouping variable and
its value.</p></li>
</ul><ul><li><p><code>cur_group_id()</code> gives a unique numeric identifier for the current group.</p></li>
</ul><ul><li><p><code>cur_group_rows()</code> gives the rows the groups appear in the data.</p></li>
</ul><ul><li><p><code>cur_column()</code> gives the name of the current column (in <code><a href="across.html">across()</a></code> only).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">n</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_data</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_data_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group_id</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group_rows</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_column</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="data-table"><code>data.table</code><a class="anchor" aria-label="anchor" href="#data-table"></a></h2>
    

<p>If you're familiar with <code>data.table</code>:</p><ul><li><p><code>cur_data()</code> &lt;-&gt; <code>.SD</code></p></li>
<li><p><code>cur_group_id()</code> &lt;-&gt; <code>.GRP</code></p></li>
<li><p><code>cur_group()</code> &lt;-&gt; <code>.BY</code></p></li>
<li><p><code>cur_group_rows()</code> &lt;-&gt; <code>.I</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See <code><a href="group_metadata.html">group_data()</a></code> for equivalent functions that return values for all groups.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  g <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="group_by.html">group_by</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu">cur_group_id</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g         x         y id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 c 0.8807781 0.8725876  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 c 0.2902445 0.8048914  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 b 0.5364767 0.1552964  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 a 0.6629266 0.4571946  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 c 0.3309674 0.2367926  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 b 0.5720669 0.8768752  2</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>row <span class="op">=</span> <span class="fu">cur_group_rows</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `summarise()` has grouped output by 'g'. You can override using the `.groups` argument.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g row</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 b   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 c   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 c   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 c   5</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_group</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a    a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b    b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c    c</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g                                                             data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a                                             0.6629266, 0.4571946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b                       0.5364767, 0.5720669, 0.1552964, 0.8768752</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c 0.8807781, 0.2902445, 0.3309674, 0.8725876, 0.8048914, 0.2367926</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_data_all</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                        data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                                   a, 0.662926638033241, 0.457194555550814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                          b, b, 0.536476703826338, 0.572066916385666, 0.155296449549496, 0.876875170739368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c, c, c, 0.880778069375083, 0.290244481759146, 0.330967405345291, 0.872587644029409, 0.804891440784559, 0.236792633775622</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="across.html">across</a></span><span class="op">(</span><span class="fu"><a href="select_helpers.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">cur_column</span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g      x      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 c x 0.88 y 0.87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 c x 0.29  y 0.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 b x 0.54 y 0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 a x 0.66 y 0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 c x 0.33 y 0.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 b x 0.57 y 0.88</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://nathaneastwood.github.io" class="external-link">Nathan Eastwood</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

