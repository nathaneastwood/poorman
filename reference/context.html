<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Context dependent expressions — context • poorman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Context dependent expressions — context"><meta property="og:description" content='These functions return information about the "current" group or "current" variable, so only work inside specific
contexts like summarise() and mutate().

n() gives the number of observations in the current group.



cur_data() gives the current data for the current group (excluding grouping variables).



cur_data_all() gives the current data for the current group (including grouping variables).



cur_group() gives the group keys, a single row data.frame containing a column for each grouping variable and
its value.



cur_group_id() gives a unique numeric identifier for the current group.



cur_group_rows() gives the rows the groups appear in the data.



cur_column() gives the name of the current column (in across() only).

'><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">poorman</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/nathaneastwood/poorman/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Context dependent expressions</h1>
    <small class="dont-index">Source: <a href="https://github.com/nathaneastwood/poorman/blob/HEAD/R/context.R" class="external-link"><code>R/context.R</code></a></small>
    <div class="hidden name"><code>context.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These functions return information about the "current" group or "current" variable, so only work inside specific
contexts like <code><a href="summarise.html">summarise()</a></code> and <code><a href="mutate.html">mutate()</a></code>.</p>
<ul><li><p><code>n()</code> gives the number of observations in the current group.</p></li>
</ul><ul><li><p><code>cur_data()</code> gives the current data for the current group (excluding grouping variables).</p></li>
</ul><ul><li><p><code>cur_data_all()</code> gives the current data for the current group (including grouping variables).</p></li>
</ul><ul><li><p><code>cur_group()</code> gives the group keys, a single row <code>data.frame</code> containing a column for each grouping variable and
its value.</p></li>
</ul><ul><li><p><code>cur_group_id()</code> gives a unique numeric identifier for the current group.</p></li>
</ul><ul><li><p><code>cur_group_rows()</code> gives the rows the groups appear in the data.</p></li>
</ul><ul><li><p><code>cur_column()</code> gives the name of the current column (in <code><a href="across.html">across()</a></code> only).</p></li>
</ul></div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">n</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_data</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_data_all</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group_id</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_group_rows</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">cur_column</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="data-table">
    <h2><code>data.table</code></h2>
    

<p>If you're familiar with <code>data.table</code>:</p><ul><li><p><code>cur_data()</code> &lt;-&gt; <code>.SD</code></p></li>
<li><p><code>cur_group_id()</code> &lt;-&gt; <code>.GRP</code></p></li>
<li><p><code>cur_group()</code> &lt;-&gt; <code>.BY</code></p></li>
<li><p><code>cur_group_rows()</code> &lt;-&gt; <code>.I</code></p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>See <code><a href="group_metadata.html">group_data()</a></code> for equivalent functions that return values for all groups.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  g <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="group_by.html">group_by</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu">cur_group_id</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g          x         y id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a 0.22196751 0.8878500  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b 0.20605487 0.2367651  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c 0.08226649 0.2953376  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 c 0.33510365 0.7627618  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 b 0.42920400 0.8711366  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 c 0.56776204 0.9513049  3</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>row <span class="op">=</span> <span class="fu">cur_group_rows</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `summarise()` has grouped output by 'g'. You can override using the `.groups` argument.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g row</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 b   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 c   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 c   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 c   6</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_group</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a    a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b    b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c    c</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g                                                                   data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a                                                   0.2219675, 0.8878500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b                             0.2060549, 0.4292040, 0.2367651, 0.8711366</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c 0.08226649, 0.33510365, 0.56776204, 0.29533762, 0.76276184, 0.95130488</span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="summarise.html">summarise</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu">cur_data_all</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                                                                        data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                                   a, 0.221967513673007, 0.887849962105975</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                           b, b, 0.206054869573563, 0.429204002022743, 0.236765120644122, 0.87113664066419</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c, c, c, 0.0822664885781705, 0.335103648481891, 0.567762044724077, 0.295337623916566, 0.762761843390763, 0.95130487671122</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gf</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="across.html">across</a></span><span class="op">(</span><span class="fu"><a href="select_helpers.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu">cur_column</span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   g      x      y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 a x 0.22 y 0.89</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 b x 0.21 y 0.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 c x 0.08  y 0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 c x 0.34 y 0.76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 b x 0.43 y 0.87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 c x 0.57 y 0.95</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://nathaneastwood.github.io" class="external-link">Nathan Eastwood</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

